<!DOCTYPE html>
<html lang="en">
  <head>
    <title>red</title>
  </head>
  <body>
		<div class="content">
		</div>
	  <div>
			<%- red_include(red_inc.main) %>
			<script type="text/javascript">
				var env = red.create("environment");

				/*
				env	.cd("children")
					.set("obj", "stateful")
					.cd("obj")
					.set("(protos)", "INIT", "dom")
					.add_state("hover")
					.add_transition("INIT", "hover", "on('mouseover', this)")
					.add_transition("hover", "INIT", "on('mouseout', this)")
					.set("tag")
					.set("text")
					.set("b")
					.set("text", "INIT", "'hello world'")
					.set("text", "hover", "'goodbye, cruel world'")
					.set("tag", "INIT", "'div'")
					.set("b", "INIT", "basis")
					.set("(manifestations)", "10")
					.top()
					.set("selection_info", "stateful")
					.cd("selection_info")
					.add_transition("INIT", "INIT", "on('mousedown', root.children.obj)")
					.set("selected_object")
					.set("selected_object", env._last_transition, "event.red_target")
					.top()
					.set("hover_object", "find(root.children.obj).in_state('hover')")
					.set("texts", "find(root.children.obj).prop('text')")
					.set("bases", "find(root.children.obj).prop('b').lt(2).parent()")
					;
				*/
				/*
				env.set("d", "dict")
					.cd("d")
					.set("prop1", "1+2")
					.top()
				*/
					env.set("s", "stateful")
					.cd("s")
					.set("inner_d", "dict")
					.cd("inner_d")
					.set("abc", "stateful_prop")
					.set("abc", "INIT", "1+5")
					//.set("(protos)", "INIT", "d")

				env.print_on_return = true;
				console.log(env.print());

				var root_pointer = env.get_root_pointer();
				output_view = $("<div />").dom_output({
					root: root_pointer
				}).appendTo(document.body);
			</script>
	  </div>
  </body>
</html>
