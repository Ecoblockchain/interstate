<!DOCTYPE html>
<html lang="en">
  <head>
    <title>red</title>
  </head>
  <body>
		<div class="content">
		</div>
	  <div>
			<%- red_include(red_inc.main) %>
			<script type="text/javascript">
				var env = red.create("environment");
				env	.cd("children")
						.set("obj", "<stateful>")
						.cd("obj")
							.add_transition("INIT", "INIT", "on('timeout', 500)")
							.set("(protos)", "INIT", "dom")
							.set("tag", "<stateful_prop>")
							.set("text", "<stateful_prop>")
							.set("tag", "INIT", "'div'")
							.set("text", "INIT", "clicker.i")
							.up()
						.set("clicker", "<stateful>")
						.cd("clicker")
							.set("(protos)", "INIT", "dom")
							.add_transition("INIT", "INIT", "on('click', this)")
							.set("tag")
							.set("tag", "INIT", "'a'")
							.set("text")
							.set("text", "INIT", "'increment'")
							.set("i", "(start) -> INIT", "1")
							.set("i", "INIT -> INIT", "i+1")
							.set("attr", "<dict>")
							.cd("attr")
								.set("href", "'javascript:void(0)'")
					;



				var root_pointer = env.get_root_pointer();
				output_view = $("<div />").dom_output({
					root: root_pointer
				}).appendTo(document.body);
				env.print_on_return = true;
				//console.log(env.print());
			</script>
	  </div>
  </body>
</html>
