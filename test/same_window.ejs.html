<!DOCTYPE html>
<html lang="en">
  <head>
    <title>red</title>
  </head>
  <body>
		<div class="output"></div>
		<div id="editor"></div>
	  <div>
			<%- red_include(red_inc.main) %>
			<script type="text/javascript">
				var env = red.create("environment");
				var root = env.get_root();

				env	.cd("child_nodes")
						.set("obj", "<stateful>")
						.cd("obj")
							.set("(prototypes)", "(start)", "[three.scene]")
							.set("width", "(start)", "400")
							.set("height", "(start)", "400")
							.set("clear_color", "(start)", "'black'")
							.set("camera", "<dict>")
							.cd("camera")
								.set("x", "0")
								.set("y", "0")
								.set("z", "300")
								.set("fov", "45")
								.set("aspect", "width/height")
								.set("near", "0.1")
								.set("far", "1000")
								.up()
				/*
							.set("rtype", "(start)", "'paper'")
							.set("rattr", "<dict>")
							.cd("rattr")
								.set("width", "700")
								.set("height", "100")
								.up()
							.set("circle", "<stateful>")
							.cd("circle")
								.set("(prototypes)", "(start)", "[raphael]")
								.set("rtype", "(start)", "'circle'")
								.set("rattr", "<dict>")
								.cd("rattr")
									.set("cx", "50")
									.set("cy", "50")
									.set("r", "50")
									.up()
								.up()
							/*
							.set("tag", "<stateful_prop>")
							.set("text", "<stateful_prop>")
							.set("tag", "(start)", "'div'")
							.set("text", "(start)", "'hello world'")
							*/
				;

				$("div#editor").editor({
					debug_env: true,
					server_window: window
				});
				$("div.output").dom_output({
					root: root,
					open_separate_client_window: false,
					edit_on_open: true
				});
			</script>
	  </div>
  </body>
</html>
