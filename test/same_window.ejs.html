<!DOCTYPE html>
<html lang="en">
  <head>
    <title>red</title>
  </head>
  <body>
		<div class="output"></div>
		<div id="editor"></div>
	  <div>
			<%- red_include(red_inc.main) %>
			<script type="text/javascript">
				var env = red.create("environment");
				var root = env.get_root();
				/*
				root.set("a", 1);
				/*
				var dict1 = red.create("dict", {has_protos: false});
				root.set("dict", dict1);

				var cell1 = red.create("cell", {str: "1+1"});
				dict1.set("c", cell1);

				//var cell2 = red.create("cell", {str: "2+3"});
				//root.set("cell", cell2);
				/*


				*/
env

.cd("children")
	.set("obj", "<stateful>")

	.cd("obj")
		.add_transition("INIT", "INIT", "on('timeout', 500)")
		.set("(protos)", "INIT", "dom")
		.set("tag", "<stateful_prop>")
		.set("text", "<stateful_prop>")
		.set("tag", "INIT", "'div'")
		.set("text", "INIT", "i")
		.set("i", "(start) -> INIT", "50")
		.set("i", "INIT -> INIT", "i+1")
;
	/*
env
.set("a", "1+1")
.set("b", "<dict>")
.cd("b")
	.set("x", "a+2")
	.set("y", "x+2")
	.up()
/**/
//console.log(env.print());
				$("div#editor").editor({
					//debug_ready: true,
					debug_env: true,
					//command_box: true,
					server_window: window
				});
				$("div.output").dom_output({
					root: root,
					open_separate_client_window: false,
					edit_on_open: true
				});
			</script>
	  </div>
  </body>
</html>
