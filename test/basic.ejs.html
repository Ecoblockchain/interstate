<!DOCTYPE html>
<html lang="en">
  <head>
    <title>red</title>
  </head>
  <body>
		<div class="content">
		</div>
	  <div>
			<%- red_include(red_inc.main) %>
			<script type="text/javascript">
				var env = red.create("environment");
				env	
					.set("a", "<stateful>")
					.cd("a")
						.set("(protos)", "INIT", "[]")
						.set("x")
						.set("x", "INIT", "1")
						.set("(protos)", "INIT", "[dom]")
						.set("text", "<stateful_prop>")
						.set("text", "INIT", "'hello world'")
						.up()
					.set("b", "<stateful>")
					.cd("b")
						.set("(protos)", "INIT", "[a]")
						.up()
					.set("c", "<stateful>")
					.cd("c")
						.set("(protos)", "INIT", "[b]")
						.up()
					.cd("children")
					.set("obj", "<stateful>")
					.cd("obj")
						.set("(protos)", "INIT", "[c]")
					;



				var root_pointer = env.get_root_pointer();
				output_view = $("<div />").dom_output({
					root: root_pointer
				}).appendTo(document.body);
				env.print_on_return = true;
				console.log(env.print());
			</script>
	  </div>
  </body>
</html>
