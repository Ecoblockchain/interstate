<!DOCTYPE html>
<html lang="en">
	<head>
		<title>euc.from.so</title>
		<style type="text/css">
			html, body { height: 100%; }
			#examples, #version_info {
				font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; 
				font-weight: 300;
				font-size: 0.8em;
				position: absolute;
				z-index: 10;
				height: 3em;
				bottom: 0px;
			}
			#version_info {
				right: 5px;
			}
			#version_no {
				font-weight: bold;
			}
			#build_time {
				margin-right: 5px;
			}
			#examples a {
				text-decoration: none;
			}
			#examples a:hover {
				text-decoration: underline;
			}
			#examples a.active {
				font-weight: bold;
			}
		</style>
	</head>
	<body>
		<div id="examples">
			<strong>Pre-built examples: </strong> <span id="sample_apps">(loading...)</span>
		</div>
		<div id="version_info">
			<span id="build_time"></span>
			<span id="version_no"></span>
		</div>
		<div class="content"></div>
	</body>
	<link rel="stylesheet" href="style/editor_style.css" />

	<script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
	<script src="_vendor/esprima.js"></script>
	
	<script src="red.min.js"></script>
	<script src="sample_apps/sample_app_loader.js"></script>
	<script type="text/javascript">
		var env, the_div, root;

		var sample_apps = [
			"hello_world",
			"simple_hover"
		];

		$(function() {
			env = red.create("environment");

			root = env.get_root();

			$("div.content").dom_output({
				root: env.get_root()
			});

			var load = function(root) {
				$("div.content").dom_output("destroy");
				env.destroy();

				env = red.create("environment", {root: root});
				$("div.content").dom_output({
					root: root
				});
			};
			var load_sample_app = function(name) {
				red.load_sample_app(name, function(root) {
					load(root);
				});
				$("#sample_apps a").removeClass("active")
				$("#sample_apps #"+name+"").addClass("active")
			};
			$("#sample_apps").html("");
			$("#version_no").text("v" + red.version);
			$("#build_time").text("built " + red.build_time.replace("2013-", ""));
			for(var i = 0; i<sample_apps.length; i++) {
				var sample_app_name = sample_apps[i];
				var sample_app_link = $("<a />").attr("href", "javascript:void(0)")
					.attr("id", sample_app_name)
					.text(sample_app_name.replace("_", " "))
					.on("click", (function(name) {
									return function() {
										load_sample_app(name);
									};
								}(sample_app_name)))
					.appendTo("#sample_apps");
				if (i < sample_apps.length - 1) {
					$("#sample_apps").append("&nbsp;|&nbsp;");
				}
			}
			load_sample_app(sample_apps[0]);
		});
	</script>
</html>
